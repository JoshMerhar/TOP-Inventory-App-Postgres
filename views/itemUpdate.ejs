<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/stylesheets/styles.css">
        <title>Update Item</title>
    </head>
    <body>
        <div class="container">
            <div class="nav-container">
                <%- include('navbar', { links: links }) %>
            </div>
            <div class="content-container">
                <h1>Update Item</h1>
                <%- include("partials/errors.ejs") %>
                <form class="input-form" action="/items/<%= item[0].item_id %>/update" method="POST">
                    <div class="form-item">
                        <label for="itemName">Item Name: </label>
                        <input type="text" name="itemName" id="itemName" value="<%= item[0].item_name %>" maxlength="50" required>
                    </div>
                    <div class="form-item">
                        <label for="itemBrand">Item Brand: </label>
                        <select name="itemBrand" id="itemBrand" required>
                            <option value="<%= item[0].brand_id %>" selected="true"><%= item[0].brand_name %></option>
                            <% brands.forEach(brand => { %>
                                <% if (brand.id !== item[0].brand_id) { %> 
                                    <option value="<%= brand.id %>"><%= brand.brand_name %></option>
                                <% }; %>
                            <% }); %>
                        </select>
                    </div>
                    <div class="form-item">
                        <label for="itemDescription">Item Description: </label>
                        <input type="text" name="itemDescription" id="itemDescription" value="<%= item[0].item_description %>" maxlength="200" required>
                    </div>
                    <div class="form-item">
                    <label for="itemCategory">Category Name: </label>
                        <select name="itemCategory" id="itemCategory" required>
                            <option value="<%= item[0].category_id %>" selected="true"><%= item[0].category_name %></option>
                            <% categories.forEach(category => { %>
                                <% if (category.id !== item[0].category_id) { %>
                                    <option value="<%= category.id %>"><%= category.category_name %></option>
                                <% }; %>
                            <% }); %>
                        </select>
                    </div>
                    <div class="form-item">
                        <label for="itemPrice">Price: </label>
                        <input type="number" name="itemPrice" id="itemPrice" value="<%= item[0].price %>" min="0" step=".01" required>
                    </div>
                    <div class="form-item">
                        <label for="itemStockAmt">Number in Stock: </label>
                        <input type="number" name="itemStockAmt" id="itemStockAmt" value="<%= item[0].num_in_stock %>" min="0" required>
                    </div>
                    <div class="form-item">
                        <label for="itemImageURL">Image URL: </label>
                        <input type="text" name="itemImageURL" id="itemImageURL" value="<%= item[0].img_url %>" placeholder="Image URL"> 
                    </div>
                    <button type="submit" class="submit-button">Submit</button>
                    <div class="cancel-update"><a href="/items/<%= item[0].item_id %>">Cancel</a></div>
                </form>
            </div>
        </div>
    </body>
</html>